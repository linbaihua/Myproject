<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<title>Vue监测数据改变的原理</title>
	<script type="text/javascript" src="../js/vue.js"></script>
</head>

<body>
	<div id="root">
		<h1>学生信息</h1>
		<button @click="addSex">添加一个性别属性，默认值是男</button>
		<h2>姓名：{{student.name}}</h2>
		<h2 v-if="student.sex">性别：{{student.sex}}</h2>
	</div>
</body>
<script type="text/javascript">
	/* 
		一开始在data中定义的属性vue会自动添加get和set方法，
		所以使用 v-model 可以改变属性值并显示

		但是如果一开始没有在data中定义的属性后面想添加的话则vue不支持响应式
		也就是不支持双向绑定没有get和set方法，这时候需要通过 Vue.set方法手动
		添加到vue中
	*/
	const vm = new Vue({
		el: '#root',
		data: {
			student: {
				name: 'tom',
				age: {
					rAge: 40,
					sAge: 29,
				},
			}
		},
		methods: {
			addSex() {
				// this.$set = Vue.set = vm.$set
				/* 
					1参数  在哪个对象中添加属性
					2参数  添加的属性名
					3参数  属性值
				*/
				this.$set(this.student, 'sex', '男')
			}
		}
	})
</script>

</html>